# 快速启动指南

## 安装步骤

1. **安装依赖**
```bash
npm install
```

2. **初始化数据库**
```bash
npx prisma generate
npx prisma db push
```

3. **启动开发服务器**
```bash
npm run dev
```

4. **访问应用**
打开浏览器访问 [http://localhost:3000](http://localhost:3000)

## 首次使用流程

### 1. 添加物料
1. 进入"物料管理"页面
2. 点击"添加物料"按钮
3. 填写物料信息：
   - 物料名称（必填）：如"鸡肉"
   - 单位（必填）：如"kg"
   - Par Level：预设库存下限，例如 70（表示希望保持 70kg 库存）
   - 安全库存：安全库存量，例如 10
4. 点击"创建物料"

**Par Level 计算建议**：
- Par Level = 平均日耗量 × 供应商送货周期 + 安全库存
- 例如：每天用鸡肉 20kg，供应商送货需要 3 天，希望保持 10kg 安全库存
- Par Level = 20 × 3 + 10 = 70kg

### 2. 登记采购（可选，可以在盘点时一起处理）
1. 进入"采购登记"页面
2. 选择采购日期
3. 在"快速添加采购计划"区域输入采购数量
4. 点击"添加"按钮

### 3. 日终盘点
1. 进入"日终盘点"页面
2. 选择盘点日期（通常是今天）
3. 点击"初始化今日记录"按钮
   - 系统会自动：
     - 获取昨日的期末库存作为今天的期初库存
     - 获取今天的采购记录作为 receivedQty
4. 在"期末实盘"列输入实际库存数量
5. 系统自动计算消耗量：消耗量 = 期初库存 + 今日采购 - 期末库存

### 4. 查看采购建议
1. 进入"采购建议"页面
2. 选择采购日期（通常是明天）
3. 查看系统生成的采购建议
   - 基于 Par Level：建议采购量 = Par Level - 当前期末库存
   - 基于平均消耗量：如果没有设置 Par Level，使用平均日消耗量 × 1.2
4. 可以点击"创建采购计划"单独创建，或点击"批量创建采购计划"一次性创建所有建议

### 5. 查看报表
1. 进入"报表分析"页面
2. 选择报表类型（日/周/月）
3. 选择日期
4. 查看物料消耗统计和趋势

## 日常使用流程

### 每天的工作流程

1. **早晨**：登记今天的采购（如果有）
2. **营业结束后**：进行日终盘点
   - 初始化今日记录
   - 录入实际库存
   - 系统自动计算消耗量
3. **盘点后**：查看采购建议
   - 查看系统生成的明日采购建议
   - 创建采购计划
4. **定期**：查看报表分析
   - 分析消耗趋势
   - 调整 Par Level
   - 优化采购策略

## 常见问题

### Q: 如何修改物料的 Par Level？
A: 目前需要通过删除后重新添加物料来修改。未来版本将支持编辑功能。

### Q: 如果忘记进行日终盘点怎么办？
A: 可以回到过去的日期进行盘点。系统会基于该日期前一天的数据计算期初库存。

### Q: 采购建议不准确怎么办？
A: 
1. 检查 Par Level 设置是否合理
2. 查看报表分析，了解实际的消耗趋势
3. 根据实际情况调整 Par Level
4. 系统会根据历史数据自动调整平均消耗量

### Q: 如何备份数据？
A: SQLite 数据库文件位于 `prisma/dev.db`，可以定期复制此文件进行备份。

## 注意事项

1. **数据一致性**：确保每天进行日终盘点，以获得准确的消耗数据
2. **Par Level 设置**：根据实际运营情况定期调整 Par Level
3. **数据备份**：定期备份数据库，避免数据丢失
4. **库存初始化**：首次使用时，需要手动设置初始库存（可以通过创建第一天的库存记录并设置 endQty）

## 下一步

- 查看 [README.md](./README.md) 了解详细功能和技术信息
- 查看报表分析，优化库存管理策略
- 根据实际使用情况调整 Par Level 设置

